version: 1
frontend:
  phases:
    preBuild:
      commands:
        - 'npm ci'
        - 'npm install autoprefixer postcss tailwindcss --save'
        - 'echo "Node version: $(node -v)"'
        - 'echo "NPM version: $(npm -v)"'
        - 'echo "Current directory: $(pwd)"'
        - 'echo "Directory contents: $(ls -la)"'
        - 'echo "Checking for tsconfig.json: $(cat tsconfig.json)"'
        - 'echo "Checking installed dependencies: $(npm list autoprefixer postcss tailwindcss)"'
    build:
      commands:
        - 'echo "Starting build process..."'
        - 'echo "Checking for @/ path aliases..."'
        - 'echo "Contents of src directory: $(ls -la src)"'
        - 'echo "Contents of src/components: $(ls -la src/components)"'
        - 'echo "Contents of src/api: $(ls -la src/api)"'
        - 'NODE_ENV=production npm run build'
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
      - '../public/**/*'
      - '../.next/static/**/*'
      - '../.next/server/**/*'
      - '../.next/standalone/**/*'
  cache:
    paths:
      - 'node_modules/**/*'
      - '.next/cache/**/*'
